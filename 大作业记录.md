* 医生相关
  * 科室
  * 门诊坐诊
  * 住院部巡诊
    * 开诊疗方案
    * 治疗
    * 诊疗方案存档(插入住院记录)
  * 开处方--药品库存问题
    * 症状描述
    * 用药清单
  * 职称--诊疗费

* 病人
  * 初诊/复诊
    * 选择医生
  * 挂号--诊室
  * 根据处方缴费
  * 药房取药
  * 决定住院
    * 办理住院手续同时缴费(诊疗方案、病房床位费等)，建立住院档案，一对一
    * 安排病床--（科室-病房-病床）一对一
    * 主治医生一对多
* 药房管理人员
  * 查询库存情况
* 病房
  * 多个床位
  * 多个病人

# 系统需求分析

## 需求概述和系统边界

支持三种用户，医生、病人和系统管理员

## 主要业务处理流程

主要业务包括门诊治疗、住院治疗、药品信息。

**主要业务流程图**

## 功能需求分析

主要功能需求分析如下(课本版)。

1. 用户管理。医生和病人基本信息录入，维护与查询功能
   * 医生信息
   * 病人信息
2. 治疗管理
3. 药品管理
   * 药品基本信息
   * 药品库存(价格、数量、用法)
4. 看病管理
   * 挂号
   * 就诊记录
   * 查询记录
5. 住院管理
6. 科室管理
   * 科室基本信息
   * 排班情况
7. 缴费管理
   * 缴费
   * 查询费用明细

医疗系统的主要功能可以按照模块进行分类：

1.基础信息维护模块：
- 医院基本信息维护
- 科室基本信息维护
- 医生基本信息维护
- 药品基本信息维护

2.医生工作模块：

- 排班管理
- 病人接诊
- 处方管理

3.病人服务模块：

- 挂号管理
- 缴费管理
- 就诊管理
- 查看就诊记录
- 查看费用明细

4.数据统计模块：

- 科室排班情况统计
- 医生工作量统计
- 病人治疗情况统计

5.系统管理模块：
- 用户管理
- 权限管理
- 系统设置

## 数据需求分析

1. 医生信息：包括工号、登录密码、姓名、性别、职称、电话号码、科室

2. 病人信息：包括病案号、姓名、性别、地址、电话号码、病房编号，床位号

3. 住院档案(档案号，病案号、入院时间、出院时间、病房编号、床位号)

4. 药品信息：包括药品编号、药品名、单价、数量、用法

5. 科室信息：包括科室信息，**病房信息**

6. 病房信息：编号、地点、收费标准，所属科室

7. 病床信息：包括病房编号、床位号

8. 就诊记录：包括就诊单号(挂号得到，时间顺序)、就诊时间、**病人信息**、医生工号、总金额、住院情况、<u>治疗明细(处方、住院记录)</u>

9. <u>缴费记录：缴费单号、就诊单号、总金额</u>

   


# 数据库概念设计

科室属性较少，所以我们不将科室作为一个单独的实体集，而将科室作为医生的一个属性。



### 基本实体集及其属性：

**医生**(Doctor)实体集。其属性有：工号(docNo)、登录密码(docPassword)、姓名(docName)、性别(sex)、职称(degree)、电话号码(telephone)、科室编号(officeNo)

| 属性名      | 含义     | 类别 | 域及约束                                                     |             |
| ----------- | -------- | ---- | ------------------------------------------------------------ | ----------- |
| docNo       | 工号     | 主码 | char(10)，不允许取空值；由大写字母D加9位数字组成，前四位数字表示入职年份，后两份数字表示入职月份，后三位数值按入职的时间顺序递增表示。 | D202301001  |
| docPassword | 登录密码 |      | char(20)，不能少于6位；不能为空                              | 123456      |
| docName     | 姓名     |      | varchar(10)，不允许取空值                                    | 李梅        |
| sex         | 性别     |      | char(2)，取值范围：{'男'，'女'}                              | 男          |
| degree      | 职称     |      | varchar(20)                                                  | 主治医师    |
| telephone   | 电话号码 |      | char(11)，由数字字符组成                                     | 13049585932 |
| officeNo    | 科室编号 |      | varchar(3)                                                   | 101         |





**病人**（Patient）实体集。其属性有密码（pPassword）、病案号（caseNumber）、姓名（pName）、性别（sex）、地址（address）、电话号码（telephone）

数据字典：

| 属性名        | 含义     | 类别 | 域及约束                                                     | 实例                                   |
| ------------- | -------- | ---- | ------------------------------------------------------------ | -------------------------------------- |
| pPassword     | 密码     |      | char(20)，不能少于6位；不可以取空值；默认为123456            | P000000001                             |
| **patientNo** | 病案号   | 主码 | char(13)，由大写字母P加上12位数字组成，其中数字为入院年份、月份、日，后按当日入院时间顺序记录病人四位编号 | P202305210001                          |
| pName         | 姓名     |      | varchar(20)，不允许取空值                                    | 杨开放                                 |
| sex           | 性别     |      | char(2)，取值范围：{‘男’，‘女’}                              | 男                                     |
| telephone     | 电话号码 |      | char(11)，由数字字符组成                                     | 13966491259                            |
| address       | 地址     |      | varchar(40)，不允许取空值                                    | 广东省佛山市南海区华南师范大学南海校园 |





**药品**(Medicine)实体集合。其属性有：药品编号(medicineNo)、药品名(medName)、单价(price)、库存数量(medleft)、用法(usage)

| 属性名     | 含义     | 类别 | 域及约束                                                     |                                                              |
| ---------- | -------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| medicineNo | 药品编号 | 主码 | char(10)，不允许取空值；又两位字母加6位数字组成，两位字母统一为YP表示“药品”，接着四位字母表示药品转正年份，最后两位数字为转正号 | YP202301                                                     |
| medName    | 药品名   |      | varchar(10)，不允许取空值                                    | 阿莫西林胶囊                                                 |
| price      | 单价     |      | numeric                                                      | 30                                                           |
| medleft    | 库存数量 |      | int                                                          | 200                                                          |
| usage      | 用法     |      | varchar(100)                                                 | 口服。成人一次0.5g，每6～8小时1次，一日剂量不超过4g。小儿一日剂量按体重20～40mg/Kg，每8小时1次; |



### 弱实体集及其属性：





### 联系集及其属性：



## 主要业务局部概念建模 



# 数据库逻辑设计

* 医生(工号、登录密码、姓名、性别、职称、电话号码、科室号)
* 病人(病案号、登录密码、姓名、性别、地址、电话号码)
* 处方(处方单号、症状描述、诊疗费、工号、病案号)
* 用药清单(药品编号、药品名、用法、用药数量、一种药的价格)
* 药品(药品编号、药品名、单价、数量、用法)
* 挂号单(就诊单号、挂号时间、病案号、工号)
* 时间安排(工号、科室号、值班时间、诊室号)

医生(Doctor)表：由医生(Doctor)实体集转化而来。

| 属性名称    | 数据类型    | 属性描述 |
| ----------- | ----------- | -------- |
| docNo       | char(10)    | 工号     |
| docPassword | char(20)    | 登录密码 |
| docName     | varchar(10) | 姓名     |
| sex         | char(2)     | 性别     |
| degree      | varchar(20) | 职称     |
| telephone   | char(11)    | 电话号码 |
| officeNo    | varchar(3)  | 编号     |



药品(Medicine)表：由药品(Medicine)实体集转化而来。

| 属性名称   | 数据类型    | 属性描述 |
| ---------- | ----------- | -------- |
| medicineNo | char(10)    | 药品编号 |
| medName    | char(20)    | 药品名   |
| price      | varchar(10) | 单价     |
| medleft    | char(2)     | 库存数量 |
| usage      | varchar(20) | 用法     |