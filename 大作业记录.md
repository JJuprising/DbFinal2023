* 医生相关
  * 科室
  * 门诊坐诊
  * 住院部巡诊
    * 开诊疗方案
    * 治疗
    * 诊疗方案存档(插入住院记录)
  * 开处方--药品库存问题
    * 症状描述
    * 用药清单
  * 职称--诊疗费

* 病人
  * 初诊/复诊
    * 选择医生
  * 挂号--诊室
  * 根据处方缴费
  * 药房取药
  * 决定住院
    * 办理住院手续同时缴费(诊疗方案、病房床位费等)，建立住院档案，一对一
    * 安排病床--（科室-病房-病床）一对一
    * 主治医生一对多
* 药房管理人员
  * 查询库存情况
* 病房
  * 多个床位
  * 多个病人

# 系统需求分析

## 需求概述和系统边界

支持三种用户，医生、病人和系统管理员

## 主要业务处理流程

主要业务包括门诊治疗、住院治疗、药品信息。

**主要业务流程图**

## 功能需求分析

主要功能需求分析如下(课本版)。

1. 用户管理。医生和病人基本信息录入，维护与查询功能
   * 医生信息
   * 病人信息
2. 治疗管理
   * 
3. 药品管理
   * 药品基本信息
   * 药品库存(价格、数量、用法)
4. 看病管理
   * 挂号
   * 就诊记录
   * 查询记录
5. 住院管理
6. 科室管理
   * 科室基本信息
   * 排班情况
7. 缴费管理
   * 缴费
   * 查询费用明细

医疗系统的主要功能可以按照模块进行分类：

1.基础信息维护模块：
- 医院基本信息维护
- 科室基本信息维护
- 医生基本信息维护
- 药品基本信息维护

2.医生工作模块：

- 排班管理
- 病人接诊
- 处方管理

3.病人服务模块：

- 挂号管理
- 缴费管理
- 就诊管理
- 查看就诊记录
- 查看费用明细

4.数据统计模块：

- 科室排班情况统计
- 医生工作量统计
- 病人治疗情况统计

5.系统管理模块：
- 用户管理
- 权限管理
- 系统设置

## 数据需求分析

1. 医生信息：包括工号、登录密码、姓名、性别、职称、电话号码、科室

2. 病人信息：包括病案号、姓名、性别、地址、电话号码、病房编号，床位号

3. 住院档案(档案号，病案号、入院时间、出院时间、病房编号、床位号)

4. 药品信息：包括药品编号、药品名、单价、数量、用法

5. 科室信息：包括科室信息，**病房信息**

6. 病房信息：编号、地点、收费标准，所属科室

7. 病床信息：包括病房编号、床位号

8. 就诊记录：包括就诊单号(挂号得到，时间顺序)、就诊时间、**病人信息**、医生工号、总金额、住院情况、<u>治疗明细(处方、住院记录)</u>

9. <u>缴费记录：缴费单号、就诊单号、总金额</u>

   

   

## 数据库概念设计

**医生**(Doctor)实体集。其属性有：工号(docNo)、登录密码(docPassword)、姓名(docName)、性别(sex)、职称(degree)、电话号码(telephone)、科室编号(officeNo)

| 属性名      | 含义     | 类别 | 域及约束                            |
| ----------- | -------- | ---- | ----------------------------------- |
| docNo       | 工号     | 主码 | char(10)，不允许取空值              |
| docPassword | 登录密码 |      | char(20)，不能少于6位               |
| docName     | 姓名     |      | varchar(10)，不允许取空值           |
| sex         | 性别     |      | char(2)，取值范围：{'男'，'女'}     |
| degree      | 职称     |      | varchar(20)                         |
| telephone   | 电话号码 |      | char(13)，由数字字符加连字符'-'组成 |
| officeNo    | 科室编号 |      | varchar(3)                          |

**药品**(Medicine)实体集合。其属性有：药品编号(medicineNo)、药品名(medName)、单价(price)、库存数量(medleft)、用法(usage)

| 属性名     | 含义     | 类别 | 域及约束                  |
| ---------- | -------- | ---- | ------------------------- |
| medicineNo | 药品编号 | 主码 | char(10)，不允许取空值    |
| medName    | 药品名   |      | varchar(10)，不允许取空值 |
| price      | 单价     |      | numeric                   |
| medleft    | 库存数量 |      | int                       |
| usage      | 用法     |      | varchar(50)               |

## 主要业务局部概念建模

# 数据库逻辑设计

* 医生(工号、登录密码、姓名、性别、职称、电话号码、科室号)
* 病人(病案号、登录密码、姓名、性别、地址、电话号码)
* 处方(处方单号、症状描述、诊疗费、工号、病案号)
* 用药清单(药品编号、药品名、用法、用药数量、一种药的价格)
* 药品(药品编号、药品名、单价、数量、用法)
* 挂号单(就诊单号、挂号时间、病案号、工号)
* 时间安排(工号、科室号、值班时间、诊室号)